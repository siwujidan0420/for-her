<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跨年星光·专属信笺</title>
    <style>
        :root { --accent: #fde68a; }
        body { margin: 0; background: #0b1021; height: 100vh; overflow: hidden; font-family: "PingFang SC", sans-serif; transition: background 1.5s ease; cursor: pointer; }
        canvas { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none; }
        
        .page { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: #fefefe; transition: all 1s cubic-bezier(0.4, 0, 0.2, 1); z-index: 10; pointer-events: none; opacity: 0; transform: scale(0.95); }
        .active { opacity: 1; transform: scale(1); }

        h1 { font-size: 1.6rem; letter-spacing: 5px; text-shadow: 0 0 15px rgba(255,255,255,0.2); margin-bottom: 20px; color: var(--accent); }
        .wish-text { font-size: 1.05rem; line-height: 2.6; color: rgba(255,255,255,0.85); padding: 0 25px; }
        .highlight { color: var(--accent); font-weight: 500; border-bottom: 1.5px solid rgba(253,230,138,0.3); }

        #nextBtn { position: fixed; bottom: 40px; right: 40px; z-index: 100; padding: 8px 18px; border: 1px solid var(--accent); background: transparent; color: var(--accent); border-radius: 20px; cursor: pointer; font-size: 0.8rem; transition: all 0.3s; backdrop-filter: blur(5px); }
        #nextBtn:hover { background: var(--accent); color: #000; }

        .pop-text { position: fixed; z-index: 100; pointer-events: none; color: var(--accent); font-size: 0.95rem; animation: floatUp 2.8s ease-out forwards; text-shadow: 0 0 8px rgba(253,230,138,0.4); }
        @keyframes floatUp { 0% { opacity: 0; transform: translateY(0); } 20% { opacity: 0.8; transform: translateY(-35px); } 100% { opacity: 0; transform: translateY(-130px); } }
    </style>
</head>
<body onclick="handleInteraction(event)">
    <audio id="bgm" loop><source src="bgm.mp3" type="audio/mpeg"></audio>
    <canvas id="canvas"></canvas>

    <div id="page1" class="page active">
        <h1>序章：那年隆冬</h1>
        <div class="wish-text">
            记忆拨回到 <span class="highlight">2024年的十二月</span>。<br>
            那时的风很冷，<br>
            但屏幕亮起时的那一串<span class="highlight">验证消息</span>，<br>
            成了那个冬天最温暖的开场。
        </div>
    </div>

    <div id="page2" class="page">
        <h1>无声起伏</h1>
        <div class="wish-text">
            海底的鱼群，听不见岸上的风声。<br>
            但每一次波澜起伏，<br>
            都是海对岛屿<br>
            最<span class="highlight">深沉</span>的告白。
        </div>
    </div>

    <div id="page3" class="page">
        <h1>归航坐标</h1>
        <div class="wish-text">
            <span class="highlight">七月</span>的季风，会将桅杆带向远方。<br>
            但在茫茫大海的航图里，<br>
            我已预留了唯一的<span class="highlight">返航</span>坐标。<br>
            因为那里，有我想见的<span class="highlight">风景</span>。
        </div>
    </div>

    <div id="page4" class="page">
        <h1>春意限定</h1>
        <div class="wish-text">
            在远航开启前的这个<span class="highlight">三月</span>，<br>
            我想暂时放下航线图，<br>
            去见一见<span class="highlight">镜头之外</span>的春天。<br>
            如果是和你一起，那一定很有趣。
        </div>
    </div>

    <div id="page5" class="page">
        <h1>未完待续</h1>
        <div class="wish-text">
            如果你也点到了这里，<br>
            那便是我们跨越时空的<span class="highlight">默契</span>。<br>
            2026年的所有期许里，<br>
            我都为你留了一个<span class="highlight">专属</span>的位置。
        </div>
    </div>

    <div id="page6" class="page">
        <h1>一个预留位</h1>
        <div class="wish-text">
            三月的风，七月的海，<br>
            还有<span class="highlight">下一年</span>的你。<br>
            如果你也愿意，<br>
            请告诉我，这就是最美的<span class="highlight">回应</span>。
        </div>
    </div>

    <button id="nextBtn" onclick="nextPage(event)">下一份心意</button>

    <script>
        const canvas = document.getElementById('canvas'), ctx = canvas.getContext('2d');
        let particles = [], isMusicPlaying = false, currentPage = 1;
        
        const phrases = [
            "如果你也点到了这里，那就是我们的默契",
            "记得24年那个冬天吗？✨",
            "三月的春天，想和你一起看",
            "期待有你的下一年",
            "万物可爱，你也是",
            "所有的'可以'，都是我的私心",
            "我的航程里，预留了你的位置",
            "愿这阵风，能吹到你身边",
            "2026，愿岁岁常相见"
        ];

        const themes = [
            { bg: '#0b1021', c: ['#ffffff', '#fde68a', '#93f5ff'] }, // 第一幕
            { bg: '#061612', c: ['#a8e6cf', '#ffffff', '#fde68a'] }, // 第二幕
            { bg: '#2d1b1a', c: ['#ffb7b2', '#ffdac1', '#ffffff'] }, // 第三幕
            { bg: '#1a2a0b', c: ['#d4fc79', '#ffffff', '#fde68a'] }, // 第四幕（三月绿）
            { bg: '#1d1d1d', c: ['#e0e0e0', '#ffffff', '#fde68a'] }, // 第五幕
            { bg: '#000000', c: ['#ffd700', '#ffffff', '#ff69b4'] }  // 第六幕
        ];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class P {
            constructor(x,y,c,v){this.x=x;this.y=y;this.c=c;this.v=v;this.a=1;}
            draw(){ctx.save();ctx.globalAlpha=this.a;ctx.beginPath();ctx.arc(this.x,this.y,1.2,0,Math.PI*2);ctx.fillStyle=this.c;ctx.fill();ctx.restore();}
            update(){this.v.x*=0.96;this.v.y*=0.96;this.v.y+=0.1;this.x+=this.v.x;this.y+=this.v.y;this.a-=0.012;}
        }

        function handleInteraction(e) {
            if (e.target.tagName === 'BUTTON') return;
            if (!isMusicPlaying) { document.getElementById('bgm').play().catch(()=>{}); isMusicPlaying = true; }
            for (let i = 0; i < 30; i++) {
                const ang = (Math.PI * 2 / 30) * i, spd = Math.random() * 4 + 2;
                particles.push(new P(e.clientX, e.clientY, themes[currentPage-1].c[Math.floor(Math.random()*3)], {x: Math.cos(ang) * spd, y: Math.sin(ang) * spd}));
            }
            if (Math.random() > 0.45) {
                const t = document.createElement('div'); t.className = 'pop-text';
                t.style.left = e.clientX + 'px'; t.style.top = e.clientY + 'px';
                t.textContent = phrases[Math.floor(Math.random() * phrases.length)];
                document.body.appendChild(t); setTimeout(() => t.remove(), 2500);
            }
        }

        function nextPage(e) {
            e.stopPropagation();
            currentPage = currentPage < 6 ? currentPage + 1 : 1;
            document.querySelectorAll('.page').forEach((p,i)=>p.className=i===currentPage-1?'page active':'page');
            document.body.style.background = themes[currentPage-1].bg;
            document.getElementById('nextBtn').textContent = currentPage === 6 ? '回到最初' : '下一份心意';
        }

        function animate() {
            ctx.fillStyle = themes[currentPage-1].bg + '33'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => { if (p.a > 0) { p.update(); p.draw(); } else particles.splice(i, 1); });
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
