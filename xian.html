<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跨年星光·专属信笺</title>
    <style>
        :root { --accent: #fde68a; }
        body { margin: 0; background: #0b1021; height: 100vh; overflow: hidden; font-family: "PingFang SC", sans-serif; transition: background 1.5s ease; cursor: pointer; }
        canvas { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none; }
        .page { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: #fefefe; transition: all 1s cubic-bezier(0.4, 0, 0.2, 1); z-index: 10; pointer-events: none; opacity: 0; transform: scale(0.95); }
        .active { opacity: 1; transform: scale(1); }
        h1 { font-size: 1.8rem; letter-spacing: 5px; text-shadow: 0 0 15px rgba(255,255,255,0.2); margin-bottom: 20px; color: var(--accent); }
        .wish-text { font-size: 1.05rem; line-height: 2.6; color: rgba(255,255,255,0.85); padding: 0 25px; }
        .highlight { color: var(--accent); font-weight: 500; border-bottom: 1.5px solid rgba(253,230,138,0.3); }
        .guide-hint { position: fixed; top: 65%; color: var(--accent); font-size: 0.85rem; animation: breathe 2.5s infinite; z-index: 15; pointer-events: none; }
        #nextBtn { position: fixed; bottom: 40px; right: 40px; z-index: 100; padding: 8px 18px; border: 1px solid var(--accent); background: transparent; color: var(--accent); border-radius: 20px; cursor: pointer; font-size: 0.8rem; backdrop-filter: blur(5px); pointer-events: auto; }
        .pop-text { position: fixed; z-index: 100; pointer-events: none; color: var(--accent); font-size: 0.95rem; animation: floatUp 2.8s ease-out forwards; }
        @keyframes breathe { 0%, 100% { opacity: 0.2; transform: scale(0.95); } 50% { opacity: 0.7; transform: scale(1.05); } }
        @keyframes floatUp { 0% { opacity: 0; transform: translateY(0); } 20% { opacity: 0.8; transform: translateY(-35px); } 100% { opacity: 0; transform: translateY(-130px); } }
    </style>
</head>
<body onclick="handleInteraction(event)">
    <audio id="bgm" loop><source src="bgm.mp3" type="audio/mpeg"></audio>
    <canvas id="canvas"></canvas>
    <div id="hintText" class="guide-hint">触碰星辰，开启新年心意</div>

    <div id="page1" class="page active">
        <h1>2026 · 新年快乐</h1>
        <div class="wish-text">岁末将至，敬颂冬绥。<br>在这场跨越时空的告别里，愿你：<br><span class="highlight">万事顺遂</span>，眼里有星辰，身边有良人。</div>
    </div>
    <div id="page2" class="page">
        <h1>序章：那年隆冬</h1>
        <div class="wish-text">记忆拨回到 <span class="highlight">2024年的十二月</span>。<br>那时的风很冷，但那一串验证消息，成了那个冬天最温暖的开场。</div>
    </div>
    <div id="page3" class="page">
        <h1>归航坐标</h1>
        <div class="wish-text"><span class="highlight">七月</span>的季风，会将桅杆带向远方。<br>但在茫茫大海的航图里，我早已预留了唯一的返航坐标。</div>
    </div>
    <div id="page4" class="page">
        <h1>春意限定</h1>
        <div class="wish-text">远航前的这个<span class="highlight">三月</span>，我想去见一见镜头之外的春天。<br>如果是和你一起，那一定很有趣。</div>
    </div>
    <div id="page5" class="page">
        <h1>一个预留位</h1>
        <div class="wish-text">三月的风，七月的海，还有下一年的你。<br>如果你也愿意，请告诉我，这就是最美的回应。</div>
    </div>

    <button id="nextBtn" onclick="nextPage(event)">下一份心意</button>

    <script>
        const canvas = document.getElementById('canvas'), ctx = canvas.getContext('2d');
        let particles = [], isMusicPlaying = false, currentPage = 1;
        const phrases = ["如果你也点到了这里，那就是我们的默契","记得24年那个冬天吗？✨","三月的春天，想和你一起看","期待有你的下一年"];
        const themes = [{bg:'#1a0b0b',c:['#ff4d4d','#fde68a']},{bg:'#0b1021',c:['#ffffff','#fde68a']},{bg:'#061612',c:['#a8e6cf','#ffffff']},{bg:'#1a2a0b',c:['#d4fc79','#ffffff']},{bg:'#000000',c:['#ffd700','#ffffff']}];
        function resize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
        window.addEventListener('resize',resize);resize();
        class P { constructor(x,y,c,v){this.x=x;this.y=y;this.c=c;this.v=v;this.a=1;} draw(){ctx.save();ctx.globalAlpha=this.a;ctx.beginPath();ctx.arc(this.x,this.y,1.2,0,Math.PI*2);ctx.fillStyle=this.c;ctx.fill();ctx.restore();} update(){this.v.x*=0.96;this.v.y*=0.96;this.v.y+=0.1;this.x+=this.v.x;this.y+=this.v.y;this.a-=0.012;} }
        function createFirework(x, y) { for (let i = 0; i < 35; i++) { const ang = (Math.PI * 2 / 35) * i, spd = Math.random() * 5 + 2; particles.push(new P(x, y, themes[currentPage-1].c[Math.floor(Math.random()*2)], {x: Math.cos(ang) * spd, y: Math.sin(ang) * spd})); } }
        function handleInteraction(e) { if (e.target.tagName === 'BUTTON') return; if (!isMusicPlaying) { document.getElementById('bgm').play().catch(()=>{}); isMusicPlaying = true; document.getElementById('hintText').style.display = 'none'; } createFirework(e.clientX, e.clientY); if (Math.random() > 0.45) { const t = document.createElement('div'); t.className = 'pop-text'; t.style.left = e.clientX + 'px'; t.style.top = e.clientY + 'px'; t.textContent = phrases[Math.floor(Math.random() * phrases.length)]; document.body.appendChild(t); setTimeout(() => t.remove(), 2500); } }
        function autoFire() { createFirework(Math.random() * canvas.width, Math.random() * canvas.height * 0.7); setTimeout(autoFire, Math.random() * 1200 + 800); }
        autoFire();
        function nextPage(e) { e.stopPropagation(); currentPage = currentPage < 5 ? currentPage + 1 : 1; document.querySelectorAll('.page').forEach((p,i)=>p.className=i===currentPage-1?'page active':'page'); document.body.style.background = themes[currentPage-1].bg; document.getElementById('nextBtn').textContent = currentPage === 5 ? '回到序章' : '下一份心意'; }
        function animate() { ctx.fillStyle = themes[currentPage-1].bg + '33'; ctx.fillRect(0, 0, canvas.width, canvas.height); particles.forEach((p, i) => { if (p.a > 0) { p.update(); p.draw(); } else particles.splice(i, 1); }); requestAnimationFrame(animate); }
        animate();
    </script>
</body>
</html>
